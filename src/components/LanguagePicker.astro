---
import { getRouteFromUrl } from "@/i18n/utils";
import { baseLocale, locales } from "@/paraglide/runtime";
import { getLanguageSwitchUrlStatic } from "@/utils/languageFallback";

const route = getRouteFromUrl(Astro.url);
const currentLang = Astro.currentLocale;
const otherLang = locales.find((lang) => lang !== currentLang) || baseLocale;
const langLabels = {
  en: "English",
  pt: "PortuguÃªs",
};

// Use fallback logic to determine the target URL
const targetUrl = getLanguageSwitchUrlStatic(otherLang, route);
---

<a href={targetUrl} class="hover:underline">
  {langLabels[otherLang]}
</a>
